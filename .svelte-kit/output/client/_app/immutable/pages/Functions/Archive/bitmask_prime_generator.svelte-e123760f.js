import{S as at,i as nt,s as ot,F as lt,l as a,r as l,a as p,m as n,n as h,u as f,h as t,c as d,q as we,p as ce,b as r,G as s,Q as ft,v as ut,H as mt,I as pt,J as ht,M as dt,f as bt,N as rt,t as vt}from"../../../chunks/index-cac77216.js";import{f as st}from"../../../chunks/index-54fd7bcd.js";function wt(o){let m,w,k,c,y,B,H,R,E,Y,M,x,b,N,v,j,T,S,u,A,_e,q,Ae,Ee,Q,g,Te,K,D,Ie,L,G,ke,Z,z,Ne,$,I,Be,Me,Ue,Pe,Re,ee,U,C,je,Se,te,F,qe,ie,V,ge,re,W,De,se,J,Ge,ae,X,ze,ne,oe,le,fe,ue,me,pe,he,de,P,Ce,We;const Fe=o[8].default,_=lt(Fe,o,o[7],null);return{c(){m=a("div"),w=a("br"),k=l(`\r
  Using ArrayBuffer With the Sieve of Eratosthenes`),y=p(),B=a("h3"),H=l("Efficient Generation of Prime Numbers With JavaScript"),R=p(),E=a("span"),Y=l("At first, Enter a number less than five million (no commas). I entered one billion on my ordinary desktop computer and after arount thirty-seconds got a sequence ending in 999999883, 999999893, 999999929, 999999937. This coincides with the table displayed at "),M=a("a"),x=l(". Table of Prime Numbers"),b=l("If the number is larger than 10,000, results at the beginning and at the end will be displayed. Otherwise, rendering a large number of primes would waste resources and produce a page containing a vary large number of primes."),N=p(),v=a("input"),j=p(),T=a("p"),S=l(o[0]),u=p(),A=a("p"),_e=l("This demonstration runs the "),q=a("a"),Ae=l("sieve_of_Eratosthenes"),Ee=l(' algorithm setting individual bits rather than 32 bit numbers.The function "sieve" uses an ArrayBuffer which is accessed by a Uint32Array named "view". I defined ArrayBuffer and view in the Chrome console and checked some methods to verify that I had 2,000,000 bits to work with.'),Q=p(),g=a("pre"),Te=l(o[5]),K=p(),D=a("p"),Ie=l("I entered 2000000 in my ten-year-old desktop computer immediately after loading this site in Chrome. All modifications of view completed in 16 microseconds. The entire process of running view(2000000), including printing the prime numbers, took 60 microseconds. Subsequent runs yielded (view modification,"),L=p(),G=a("p"),ke=l(`The 150,000 integers in the Uint32Array named "view" all start out as zeros. Each time a prime number is identified, all of its multiples up to a designated bound are set to "1". The 0's left over at the end correspond to prime numbers. This is the sieve of Eratosthenes working with great efficiency.`),Z=p(),z=a("p"),Ne=l("In the final stage, whenever test(i) === 0, i gets appended to the string A. A is the list of primes less than or equal to the sieve argument."),$=p(),I=a("p"),Be=l('The Uint32Array named "view" is not indexed but, for example, "(view[0] & '),Me=l(o[1]),Ue=l(')=== 0" returns "false" and "(view[0] & '),Pe=l(o[2]),Re=l(`) === 0" returns "true" where its position can be ascertained and its value changed with bit masks. view[n] is a binary number and its 32 bits are, therefore, not indexed. That's not a problem because NUM can easily be examined and flipped using bit masks.  NUM's precise location in view[n] is resolved into the pair "n,j" pair for lookup, where n is the index in view and j is the position in view[n]. If NUM's value is still 0 after the sieve has run its course, it's a prime number. This is an efficient algorithm. I entered 300000 below and quickly scrolled down to see that the largest prime number less than 300,000 is 299,993. There's no limit to how many integers can be stored in a Uint32Array. Number.MAX_SAFE_INTEGER is 9007199254740991 but given a powerful enough computer and enough time, the largest prime number less than a humongous bigInt much larger than MAX_SAFE_INTEGER could be computed.`),ee=p(),U=a("p"),C=a("a"),je=l("Mozilla Developer Network"),Se=l(' says, "The ArrayBuffer object is used to represent a generic, fixed-length raw binary data buffer." and "It is an array of bytes, often referred to in other languages as a "byte array".You cannot directly manipulate the contents of an ArrayBuffer; instead, you create one of the typed array objects or a DataView object which represents the buffer in a specific format, and use that to read and write the contents of the buffer." This is the foundation on which this demo rests:'),te=p(),F=a("pre"),qe=l(o[5]),ie=p(),V=a("div"),ge=l(`And here's the function "sieve":`),re=p(),W=a("pre"),De=l(o[4]),se=p(),J=a("div"),Ge=l("These are the functions that set bits and report the status of bits:"),ae=p(),X=a("pre"),ze=l(o[6]),ne=p(),oe=a("br"),le=a("br"),fe=a("br"),ue=p(),me=a("br"),pe=a("br"),he=a("br"),de=p(),_&&_.c(),this.h()},l(e){m=n(e,"DIV",{style:!0});var i=h(m);w=n(i,"BR",{}),k=f(i,`\r
  Using ArrayBuffer With the Sieve of Eratosthenes`),i.forEach(t),y=d(e),B=n(e,"H3",{});var Je=h(B);H=f(Je,"Efficient Generation of Prime Numbers With JavaScript"),Je.forEach(t),R=d(e),E=n(e,"SPAN",{});var be=h(E);Y=f(be,"At first, Enter a number less than five million (no commas). I entered one billion on my ordinary desktop computer and after arount thirty-seconds got a sequence ending in 999999883, 999999893, 999999929, 999999937. This coincides with the table displayed at "),M=n(be,"A",{href:!0});var Xe=h(M);x=f(Xe,". Table of Prime Numbers"),Xe.forEach(t),b=f(be,"If the number is larger than 10,000, results at the beginning and at the end will be displayed. Otherwise, rendering a large number of primes would waste resources and produce a page containing a vary large number of primes."),be.forEach(t),N=d(e),v=n(e,"INPUT",{type:!0}),j=d(e),T=n(e,"P",{});var Oe=h(T);S=f(Oe,o[0]),Oe.forEach(t),u=d(e),A=n(e,"P",{});var ve=h(A);_e=f(ve,"This demonstration runs the "),q=n(ve,"A",{href:!0});var He=h(q);Ae=f(He,"sieve_of_Eratosthenes"),He.forEach(t),Ee=f(ve,' algorithm setting individual bits rather than 32 bit numbers.The function "sieve" uses an ArrayBuffer which is accessed by a Uint32Array named "view". I defined ArrayBuffer and view in the Chrome console and checked some methods to verify that I had 2,000,000 bits to work with.'),ve.forEach(t),Q=d(e),g=n(e,"PRE",{});var Ye=h(g);Te=f(Ye,o[5]),Ye.forEach(t),K=d(e),D=n(e,"P",{});var xe=h(D);Ie=f(xe,"I entered 2000000 in my ten-year-old desktop computer immediately after loading this site in Chrome. All modifications of view completed in 16 microseconds. The entire process of running view(2000000), including printing the prime numbers, took 60 microseconds. Subsequent runs yielded (view modification,"),xe.forEach(t),L=d(e),G=n(e,"P",{});var Qe=h(G);ke=f(Qe,`The 150,000 integers in the Uint32Array named "view" all start out as zeros. Each time a prime number is identified, all of its multiples up to a designated bound are set to "1". The 0's left over at the end correspond to prime numbers. This is the sieve of Eratosthenes working with great efficiency.`),Qe.forEach(t),Z=d(e),z=n(e,"P",{});var Ke=h(z);Ne=f(Ke,"In the final stage, whenever test(i) === 0, i gets appended to the string A. A is the list of primes less than or equal to the sieve argument."),Ke.forEach(t),$=d(e),I=n(e,"P",{});var O=h(I);Be=f(O,'The Uint32Array named "view" is not indexed but, for example, "(view[0] & '),Me=f(O,o[1]),Ue=f(O,')=== 0" returns "false" and "(view[0] & '),Pe=f(O,o[2]),Re=f(O,`) === 0" returns "true" where its position can be ascertained and its value changed with bit masks. view[n] is a binary number and its 32 bits are, therefore, not indexed. That's not a problem because NUM can easily be examined and flipped using bit masks.  NUM's precise location in view[n] is resolved into the pair "n,j" pair for lookup, where n is the index in view and j is the position in view[n]. If NUM's value is still 0 after the sieve has run its course, it's a prime number. This is an efficient algorithm. I entered 300000 below and quickly scrolled down to see that the largest prime number less than 300,000 is 299,993. There's no limit to how many integers can be stored in a Uint32Array. Number.MAX_SAFE_INTEGER is 9007199254740991 but given a powerful enough computer and enough time, the largest prime number less than a humongous bigInt much larger than MAX_SAFE_INTEGER could be computed.`),O.forEach(t),ee=d(e),U=n(e,"P",{style:!0});var Ve=h(U);C=n(Ve,"A",{href:!0});var Le=h(C);je=f(Le,"Mozilla Developer Network"),Le.forEach(t),Se=f(Ve,' says, "The ArrayBuffer object is used to represent a generic, fixed-length raw binary data buffer." and "It is an array of bytes, often referred to in other languages as a "byte array".You cannot directly manipulate the contents of an ArrayBuffer; instead, you create one of the typed array objects or a DataView object which represents the buffer in a specific format, and use that to read and write the contents of the buffer." This is the foundation on which this demo rests:'),Ve.forEach(t),te=d(e),F=n(e,"PRE",{});var Ze=h(F);qe=f(Ze,o[5]),Ze.forEach(t),ie=d(e),V=n(e,"DIV",{});var $e=h(V);ge=f($e,`And here's the function "sieve":`),$e.forEach(t),re=d(e),W=n(e,"PRE",{});var et=h(W);De=f(et,o[4]),et.forEach(t),se=d(e),J=n(e,"DIV",{});var tt=h(J);Ge=f(tt,"These are the functions that set bits and report the status of bits:"),tt.forEach(t),ae=d(e),X=n(e,"PRE",{});var it=h(X);ze=f(it,o[6]),it.forEach(t),ne=d(e),oe=n(e,"BR",{}),le=n(e,"BR",{}),fe=n(e,"BR",{}),ue=d(e),me=n(e,"BR",{}),pe=n(e,"BR",{}),he=n(e,"BR",{}),de=d(e),_&&_.l(e),this.h()},h(){we(m,"font-family","Times New Roman"),we(m,"text-align","center"),we(m,"font-size","38px"),ce(M,"href","http://compoasso.free.fr/primelistweb/page/prime/liste_online_en.php"),ce(v,"type","text"),ce(q,"href","https://en.wikipedia.org/wiki/sieve_of_Eratosthenes"),ce(C,"href","https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer"),we(U,"indent","3%")},m(e,i){r(e,m,i),s(m,w),s(m,k),r(e,y,i),r(e,B,i),s(B,H),r(e,R,i),r(e,E,i),s(E,Y),s(E,M),s(M,x),s(E,b),r(e,N,i),r(e,v,i),r(e,j,i),r(e,T,i),s(T,S),r(e,u,i),r(e,A,i),s(A,_e),s(A,q),s(q,Ae),s(A,Ee),r(e,Q,i),r(e,g,i),s(g,Te),r(e,K,i),r(e,D,i),s(D,Ie),r(e,L,i),r(e,G,i),s(G,ke),r(e,Z,i),r(e,z,i),s(z,Ne),r(e,$,i),r(e,I,i),s(I,Be),s(I,Me),s(I,Ue),s(I,Pe),s(I,Re),r(e,ee,i),r(e,U,i),s(U,C),s(C,je),s(U,Se),r(e,te,i),r(e,F,i),s(F,qe),r(e,ie,i),r(e,V,i),s(V,ge),r(e,re,i),r(e,W,i),s(W,De),r(e,se,i),r(e,J,i),s(J,Ge),r(e,ae,i),r(e,X,i),s(X,ze),r(e,ne,i),r(e,oe,i),r(e,le,i),r(e,fe,i),r(e,ue,i),r(e,me,i),r(e,pe,i),r(e,he,i),r(e,de,i),_&&_.m(e,i),P=!0,Ce||(We=ft(v,"keydown",o[3]),Ce=!0)},p(e,[i]){(!P||i&1)&&ut(S,e[0]),_&&_.p&&(!P||i&128)&&mt(_,Fe,e,e[7],P?ht(Fe,e[7],i,null):pt(e[7]),null)},i(e){P||(dt(()=>{c||(c=rt(m,st,{},!0)),c.run(1)}),bt(_,e),P=!0)},o(e){c||(c=rt(m,st,{},!1)),c.run(0),vt(_,e),P=!1},d(e){e&&t(m),e&&c&&c.end(),e&&t(y),e&&t(B),e&&t(R),e&&t(E),e&&t(N),e&&t(v),e&&t(j),e&&t(T),e&&t(u),e&&t(A),e&&t(Q),e&&t(g),e&&t(K),e&&t(D),e&&t(L),e&&t(G),e&&t(Z),e&&t(z),e&&t($),e&&t(I),e&&t(ee),e&&t(U),e&&t(te),e&&t(F),e&&t(ie),e&&t(V),e&&t(re),e&&t(W),e&&t(se),e&&t(J),e&&t(ae),e&&t(X),e&&t(ne),e&&t(oe),e&&t(le),e&&t(fe),e&&t(ue),e&&t(me),e&&t(pe),e&&t(he),e&&t(de),_&&_.d(e),Ce=!1,We()}}}function ct(o,m){var w=Math.floor(m/8),k=m%8;o[w]|=1<<k}function ye(o,m){var w=Math.floor(m/8),k=m%8,c=o[w]&1<<k;return c===0}function yt(o,m,w){let{$$slots:k={},$$scope:c}=m;var y="",B="1<<10",H="1<<11";function R(b){var N=new ArrayBuffer(1.1*Math.ceil(b/8)),v=new Uint8Array(N),j=new Date;j.getTime(),w(0,y="");var T=b+1,S=Math.sqrt(T)+1;for(let u=2;u<S;u+=1)if(ye(v,u))for(let A=2*u;A<T;A+=u)ct(v,A);for(let u=2;u<T;u++)(ye(v,u)&&b<10001||ye(v,u)&&b<1000001&&(u<100||u>.99*b)||ye(v,u)&&b>1e6&&(u<100||u>.9999*b))&&w(0,y=y+u+", ")}var E=function(N){if(N.keyCode==13){let v=parseInt(N.target.value);R(v)}},Y=`function sieve (N) {
    var d = new Date();
    var t = d.getTime();
    A = "";
    var top = N + 1;
    var max = Math.sqrt(top) + 1;
    for(let i = 2; i < max; i+=1){
        if(test(i)) {
            for(let j = 2*i; j < top; j+=i) {
                set(j);
            }
        }
    }
    for(let i = 2; i < top; i++) {
        if (test(view,i) & N < 10001) A = A + i + ", ";
        else if (test(view,i) && N < 1000001 && (i < 100 || i > 0.99*N)) A = A + i + ", "; 
        else if (test(view,i) && N > 1000000 && (i < 100 || i > 0.9999*N)) A = A + i + ", "; 
    } `,M=`const buf = new ArrayBuffer(250004);
const view = new Uint32Array(buf)`,x=`function set(ar,i) {
  var a = Math.floor(i / 8)
  var b = i % 8
  ar[a] |= (1 << b)
};

function test (ar,i) {
  var a = Math.floor(i / 8);
  var b = i % 8;
  var value = ar[a] & (1 << b);
  return value === 0;
}
}`;return o.$$set=b=>{"$$scope"in b&&w(7,c=b.$$scope)},[y,B,H,E,Y,M,x,c,k]}class Et extends at{constructor(m){super(),nt(this,m,yt,wt,ot,{})}}export{Et as default};
