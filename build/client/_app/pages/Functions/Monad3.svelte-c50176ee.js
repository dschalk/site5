import{S as Qe,i as Ve,s as Fe,k as P,e as r,t as b,Q as Je,d as t,m as _,c as m,a as w,h as B,f as O,g as n,G as y,L as Oe,j as pe,M as Ke,N as Ue,T as We,O as Ce}from"../../chunks/vendor-a263fa63.js";function Xe(i){let I,o,M,K,c,v,f,h,E,l,q,A,H,$,T,k,C,D,z,g,W,p,a,N,S=i[0][i[2]]+"",G,X,u,R,d=i[0][i[3]]+"",j,se,Q,Pe,ee=i[0][i[4]]+"",ne,ie,V,be,le,Y,_e,fe,F,Be,oe,Z,he,ue,J,ve,ae,re,me,te,ye,ce,L,Ae,Te;return{c(){I=P(),o=r("div"),M=r("p"),K=b(`
Promise Handling Monads`),v=P(),f=r("p"),h=b("If you click the buttons  (below) more than once, in any order, each routine will finish and then start over with the next function in the queue."),E=P(),l=r("button"),q=b("test_3 ()"),A=P(),H=r("button"),$=b("test_4 ()"),T=P(),k=r("br"),C=r("br"),D=P(),z=r("h3"),g=b("lok is "),W=b(i[1]),p=P(),a=r("h3"),N=b("B[sym1] is "),G=b(S),X=P(),u=r("h3"),R=b("B[sym2] is "),j=b(d),se=P(),Q=r("h3"),Pe=b("B[sym3] is "),ne=b(ee),ie=P(),V=r("pre"),be=b(i[7]),le=P(),Y=r("p"),_e=b(`"A" and "B" are global objects manipulated by the monadPlus function named "Mona". There is no danger of name clashes, race conditions, or anything else untoward because this Svelte-Sapper module is small and unreachable from other modules. As Mona() changes B[sym1], B[sym2], and B[sym3], the browser display changes accordingly. Here's the dynamic display HTML:`),fe=P(),F=r("pre"),Be=b(i[8]),oe=P(),Z=r("p"),he=b("And here's the code for the functions:"),ue=P(),J=r("pre"),ve=b(i[9]),ae=P(),re=r("br"),me=P(),te=r("p"),ye=P(),ce=r("br"),this.h()},l(e){Je('[data-svelte="svelte-ditq1u"]',document.head).forEach(t),I=_(e),o=m(e,"DIV",{style:!0});var we=w(o);M=m(we,"P",{}),w(M).forEach(t),K=B(we,`
Promise Handling Monads`),we.forEach(t),v=_(e),f=m(e,"P",{});var Se=w(f);h=B(Se,"If you click the buttons  (below) more than once, in any order, each routine will finish and then start over with the next function in the queue."),Se.forEach(t),E=_(e),l=m(e,"BUTTON",{style:!0});var qe=w(l);q=B(qe,"test_3 ()"),qe.forEach(t),A=_(e),H=m(e,"BUTTON",{style:!0});var He=w(H);$=B(He,"test_4 ()"),He.forEach(t),T=_(e),k=m(e,"BR",{}),C=m(e,"BR",{}),D=_(e),z=m(e,"H3",{});var ke=w(z);g=B(ke,"lok is "),W=B(ke,i[1]),ke.forEach(t),p=_(e),a=m(e,"H3",{});var Me=w(a);N=B(Me,"B[sym1] is "),G=B(Me,S),Me.forEach(t),X=_(e),u=m(e,"H3",{});var Ee=w(u);R=B(Ee,"B[sym2] is "),j=B(Ee,d),Ee.forEach(t),se=_(e),Q=m(e,"H3",{});var Ne=w(Q);Pe=B(Ne,"B[sym3] is "),ne=B(Ne,ee),Ne.forEach(t),ie=_(e),V=m(e,"PRE",{style:!0});var Re=w(V);be=B(Re,i[7]),Re.forEach(t),le=_(e),Y=m(e,"P",{});var Ie=w(Y);_e=B(Ie,`"A" and "B" are global objects manipulated by the monadPlus function named "Mona". There is no danger of name clashes, race conditions, or anything else untoward because this Svelte-Sapper module is small and unreachable from other modules. As Mona() changes B[sym1], B[sym2], and B[sym3], the browser display changes accordingly. Here's the dynamic display HTML:`),Ie.forEach(t),fe=_(e),F=m(e,"PRE",{style:!0});var ze=w(F);Be=B(ze,i[8]),ze.forEach(t),oe=_(e),Z=m(e,"P",{});var je=w(Z);he=B(je,"And here's the code for the functions:"),je.forEach(t),ue=_(e),J=m(e,"PRE",{style:!0});var Le=w(J);ve=B(Le,i[9]),Le.forEach(t),ae=_(e),re=m(e,"BR",{}),me=_(e),te=m(e,"P",{}),w(te).forEach(t),ye=_(e),ce=m(e,"BR",{}),this.h()},h(){document.title="Promises",O(o,"font-family","Times New Roman"),O(o,"text-align","center"),O(o,"font-size","38px"),O(l,"text-align","left"),O(H,"text-align","left"),O(V,"font-size","18"),O(F,"font-size","18"),O(J,"font-size","18")},m(e,s){n(e,I,s),n(e,o,s),y(o,M),y(o,K),n(e,v,s),n(e,f,s),y(f,h),n(e,E,s),n(e,l,s),y(l,q),n(e,A,s),n(e,H,s),y(H,$),n(e,T,s),n(e,k,s),n(e,C,s),n(e,D,s),n(e,z,s),y(z,g),y(z,W),n(e,p,s),n(e,a,s),y(a,N),y(a,G),n(e,X,s),n(e,u,s),y(u,R),y(u,j),n(e,se,s),n(e,Q,s),y(Q,Pe),y(Q,ne),n(e,ie,s),n(e,V,s),y(V,be),n(e,le,s),n(e,Y,s),y(Y,_e),n(e,fe,s),n(e,F,s),y(F,Be),n(e,oe,s),n(e,Z,s),y(Z,he),n(e,ue,s),n(e,J,s),y(J,ve),n(e,ae,s),n(e,re,s),n(e,me,s),n(e,te,s),n(e,ye,s),n(e,ce,s),L=!0,Ae||(Te=[Oe(l,"click",i[5]),Oe(H,"click",i[6])],Ae=!0)},p(e,[s]){(!L||s&2)&&pe(W,e[1]),(!L||s&1)&&S!==(S=e[0][e[2]]+"")&&pe(G,S),(!L||s&1)&&d!==(d=e[0][e[3]]+"")&&pe(j,d),(!L||s&1)&&ee!==(ee=e[0][e[4]]+"")&&pe(ne,ee)},i(e){L||(Ke(()=>{c||(c=Ue(o,Ce,{},!0)),c.run(1)}),L=!0)},o(e){c||(c=Ue(o,Ce,{},!1)),c.run(0),L=!1},d(e){e&&t(I),e&&t(o),e&&c&&c.end(),e&&t(v),e&&t(f),e&&t(E),e&&t(l),e&&t(A),e&&t(H),e&&t(T),e&&t(k),e&&t(C),e&&t(D),e&&t(z),e&&t(p),e&&t(a),e&&t(X),e&&t(u),e&&t(se),e&&t(Q),e&&t(ie),e&&t(V),e&&t(le),e&&t(Y),e&&t(fe),e&&t(F),e&&t(oe),e&&t(Z),e&&t(ue),e&&t(J),e&&t(ae),e&&t(re),e&&t(me),e&&t(te),e&&t(ye),e&&t(ce),Ae=!1,We(Te)}}}function U(i){return new Promise(I=>setTimeout(I,i))}async function de(i){return await U(300),i*i}async function De(i){await U(100*i)}async function x(i){return await U(500),i}async function Ge(i){return await U(600),i*i*i}function Ye(i,I,o){let M=p=>async a=>(await U(500),parseInt(p,10)+parseInt(a,10)),K=async p=>(await U(600),2*parseInt(p,10)),c=p=>async a=>(await U(600),p*a),v=p=>async a=>(await U(300),a/p);const f=Symbol("sym1"),h=Symbol("sym2"),E=Symbol("sym3");let l={};l[f]=[],l[h]=[],l[E]=[];const q=function(a=[],N="name"){let S,G;return o(0,l[N]=a.slice(),l),function X(u){return u instanceof Promise&&u.then(R=>{typeof R=="function"||R==k||R==NaN||typeof R=="undefined"?typeof u!="function"&&u!=k&&typeof u!="undefined"&&u!=NaN&&!(u instanceof Promise)&&o(0,l[N]=l[N].concat(u),l):o(0,l[N]=l[N].concat(R),l)}),G=function(d){return d==="halt"||d==="h"||d==null||typeof d=="undefined"||d==NaN?(o(0,l),l[N].slice()):(typeof d=="function"&&u instanceof Promise?S=u.then(j=>d(j)):typeof d!="function"&&u instanceof Promise?S=u.then(j=>j):typeof d!="function"?S=d:S=d(u),X(S))},G}(l[N].slice(-1)[0])},A={};function H(){o(1,k=!0),A[f]=q([0],f),A[h]=q([],h),A[E]=q([],E),A[f](M(3))(Ge)(M(3))(de)(v(100))(()=>T(h,f)(x)(de)(v(27))(c(7))(K)(()=>T(E,h)(x)(()=>l[f][1]+l[f][2]+l[f][3])(v(10))(c(7))(()=>2+3+4+5)(c(3))(()=>T(f,h)(x)(v(7))(M(8))(c(3))(()=>l[f].reduce((p,a)=>p+a)-42)(M(-23))(v(24))(()=>De(9))(()=>o(1,k=!1)))))}function $(){o(1,k=!0),A[f]=q([0],f),A[h]=q([],h),A[E]=q([],E),A[f](M(4))(Ge)(M(6))(de)(v(100))(()=>T(h,f)(x)(de)(v(7))(c(3))(K)(()=>T(E,h)(x)(()=>l[f][1]+l[f][2]+l[f][3])(v(23))(c(7))(()=>2+3+4+5)(c(3))(()=>T(f,h)(x)(v(343))(M(7))(c(400))(M(-1e3))(v(100))(()=>De(9))(()=>o(1,k=!1)))))}function T(p,a){let N=A[a]().slice(-1);return A[p](N)}var k=!1;function C(){k?setTimeout(()=>C(),300):H()}function D(){k?setTimeout(()=>D(),300):$()}let z=`
const sym1 = Symbol('sym1');
const sym2 = Symbol('sym2');
const sym3 = Symbol('sym3');

const A = {};
const B = {};
  B[sym1] = [];
  B[sym2] = [];
  B[sym3] = [];`;var g=`<h3>lok is {lok}</h3>
<h3> B[sym1] is {B[sym1]} </h3>
<h3> B[sym2] is {B[sym2]} </h3>
<h3> B[sym3] is {B[sym3]} </h3>`,W=`let Mona = function Mona ( AR = [],  ar = "name" )  {  
  let p, run, f;
  B[ar] = AR.slice();
  let x = B[ar].slice(-1)[0] ;
  return run = (function run (x) {
  if (x instanceof Promise) {x.then(y => {
    if (!( typeof y === "function" || y == lok || y == NaN || y == undefined ||
      typeof y == "undefined" || y != y  ) ){B[ar] = B[ar].concat(y)}
    else if (typeof x !== "function" && x != lok  &&  x != undefined  && x != NaN  && !(x instanceof Promise)) {B[ar] = B[ar].concat(x);
  }})}
    f = function f (func) {
      if (func === 'halt' || func === 'h' || func == undefined ||
        typeof func == "undefined" || func == NaN ) {
        B[ar] = B[ar]; 
        return B[ar].slice();
      }
      if (typeof func == "function" && x instanceof Promise) p = x.then(v => func(v))
      else if (typeof func != "function" && x instanceof Promise) p = x.then(v => v)
      else if (typeof func != "function") p = func
      else p = func(x);
      return run(p);
    };
    return f;
  })(x);
}

function test_3 () {
  lok = true;
  A[sym1] = Mona([0], sym1);
  A[sym2] = Mona( [], sym2);
  A[sym3] = Mona([], sym3);
  A[sym1](addP(3))(cubeP)(addP(3))(squareP)(divP(100))(() => 
    branch(sym2,sym1)(idP)(squareP)(divP(27))(multP(7))(doubleP)(() => 
      branch(sym3,sym2)(idP)(() => B[sym1][1]+B[sym1][2]+B[sym1][3])
      (divP(10))(multP(7))(()=>2+3+4+5)(multP(3))(() => 
        branch(sym1,sym2)(idP)(divP(7))(addP(8))(multP(3))
        (() => B[sym1].reduce((a,b) => a+b) - 42)
        (addP(-23))(divP(24))(() => pause(9))(() => lok = false)
      )
    )
  )  
}

function test_4 () {
  lok = true;
  A[sym1] = Mona([0], sym1);
  A[sym2] = Mona( [], sym2);
  A[sym3] = Mona([], sym3);
  A[sym1](addP(4))(cubeP)(addP(6))(squareP)(divP(100))(() => 

    branch(sym2,sym1)(idP)(squareP)(divP(7))(multP(3))(doubleP)(() => 

      branch(sym3,sym2)(idP)(() => B[sym1][1]+B[sym1][2]+B[sym1][3])
      (divP(23))(multP(7))(()=>2+3+4+5)(multP(3))(() => 

        branch(sym1,sym2)(idP)(divP(343))(addP(7))(multP(400))
        (addP(-1000))(divP(100))(() => pause(9))(() => lok = false)
      )
    )
  )  
}

function branch (a, b) {  // Transfers a copy of the last item in A[b] to A[a]
  let c = A[b]().slice(-1);
  return A[a](c);
}

function resume (s) {return branch(s,s)}

var lok = false;

function start () {
  if (!lok) {
    test_3()
  }
  else {
    setTimeout(() => start(),300);
  }
}

function start_2 () {
  if (!lok) {
    test_4()
  }
  else {
    setTimeout(() => start_2(),300);
  }
}`;return[l,k,f,h,E,C,D,z,g,W]}class xe extends Qe{constructor(I){super();Ve(this,I,Ye,Xe,Fe,{})}}export{xe as default};
